<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_eventmarker</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-99</depth>
  <persistent>-1</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Gatete Mario Engine: Anniversary Edition Persistent Object

/*  
//  - IMPORTANT NOTE -
//
//  This engine has a persistency mode that can be enabled / disabled with the variable below.
//
//  If you keep this enabled some items will maintain it's current state when changing rooms.
//  
//  This variable will not affect the following items
//
//  -   Green Stars
//  -   3-Up Moons
//  -   Enemies
//  -   Every item that has the following parents set on it.
//
//      -   obj_carryparent
//      -   obj_holdparent
//      -   obj_pullparent
//
//  This is a very important variable, do not delete it.
*/

//Initialize Colour Swap shader.
global.Pal_Shader = shd_palette_swapper;
pal_swap_init_system(global.Pal_Shader);

//Persistence mode
global.persistence = true;

//Flight time (In seconds)
global.flighttime = 4;

//Health Mode
global.healthmode = 1;

//Skin of the level
//0: Normal
//1: Underground
//2: Castle
global.skin = 0;

//Game width
global.gw = 384;

//Game height
global.gh = 216;

//Screenshot of the game, if it exists
back = -1;

//Message to display to the screen
message = "";

//Declare all the global variables
init_globals();

//Item that is being carried between rooms
global.carrieditem = noone;

//The sprite used by an item carried between rooms
global.carriedsprite = noone;

//Whether Mario should hold/carry an object
//0: No hold
//1: Carry
//2: Hold
//3: Hold Boomerang
global.shallihold = 0;

//The level music
global.levelmusic = noone;

//Initialize star coin system
//0: Not collected
//1: Collected, not saved
//2: Collected, saved with checkpoint
//3: Collected, saved with level completion. (Adds to global.sc_count)
for (i=0; i&lt;99; i++;) {

    global.starcoin[i,0] = 0;
    global.starcoin[i,1] = 0;
    global.starcoin[i,2] = 0;
}

//Data structure for picked up 3up moons
global.moons = ds_map_create();

//Data structure for picked up star medals
global.sc_get = ds_map_create();

//Data structure for collected star medals (This will be displayed on map.)
global.sc_count = ds_map_create();

//Data structure for storing the state of the world map.
global.worldmap = ds_map_create();

//Data structure for modified items when changing rooms (Will work only if global.persistence is set to 1).
global.modified = ds_map_create();

//Set the epsilon value for floating point numbers
math_set_epsilon(0.00001);

//Disable application surface automatic drawing
application_surface_draw_enable(0);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Delay applying settings

//Apply fullscreen
window_set_fullscreen(fullscreen);

//Apply filtering and VSync
event_user(0);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Center the window

window_center();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Update the view values

//Set the view width and height
view_wport[0] = global.gw;
view_hport[0] = global.gh;
view_wview[0] = global.gw;
view_hview[0] = global.gh;

//Enable views
view_enabled = true;

//Make sure view 0 is always visible
if (!view_visible[0])
    view_visible[0] = true;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Make sure lives and score does not surpass 99 and 999999990 respectively

if (lives &gt; 99)
    lives = 99;
if (score &gt; 999999990)
    score = 999999990;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="5" enumb="18">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Handle all of the hot keys

//Quit the game when ALT+F4 are pressed.
if (keyboard_check_pressed(vk_f4))
    game_end();
    
//Restart the game when ALT+R are pressed.
else if (keyboard_check_pressed(ord('R'))) {

    //Stop all playing sounds
    audio_stop_all();
    
    //Reset globals
    init_globals();
    
    //Force reset the game
    room_goto(rm_enginetest)
}

//Fullscreen (Handled by GM: Studio)
else if (keyboard_check_pressed(vk_enter)) {

    //Toggle between fullscreen or windowed mode.
    fullscreen = !fullscreen
        
    //Apply settings
    event_user(1);
}

//Toggles VSync
else if (keyboard_check_pressed(ord('V'))) {

    //Toggle vertical syncronization on / off.
    vsync = !vsync
        
    //Apply settings
    event_user(1);
}

//Toggle FPS display
else if (keyboard_check_pressed(ord('F')))
    showfps = !showfps

//Set default window size
else if (keyboard_check_pressed(ord('1'))) {

    filter = 0;
    event_user(0);
}

//Set 2x window size
else if (keyboard_check_pressed(ord('2'))) {

    filter = 1;
    event_user(0);
}

//Set 3x window size
else if (keyboard_check_pressed(ord('3'))) {

    filter = 2
    event_user(0);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Set up the screen to be displayed

//Temporary variable
var s;

//Normal
if (filter = 0)
    s = 1;

//HQ2X
else if (filter = 1)
    s = 2;

//HQ4X
else if (filter = 2)
    s = 3;

//Reset display
display_reset(0,vsync);

//Set up the window
window_set_size(global.gw*s,global.gh*s);

//Set up the display
display_set_gui_size(global.gw*s,global.gh*s);

//Center the window
alarm[0] = 1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///If health mode is active and the player does not have a powerup, set big as default.

//If health mode is activated.
if (global.healthmode) {

    //If the player is not big and does not have a bigger powerup.
    if (global.powerup &lt; cs_fire)
        global.powerup = cs_big;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Save Fullscreen + Window size + VSync Settings

//Open the file
var file = file_text_open_write("Settings.dat");

//Save fullscreen settings
file_text_write_string(file,string(fullscreen));
file_text_writeln(file);

//Save filtering settings
file_text_write_string(file,string(filter));
file_text_writeln(file);

//Save vsync settings
file_text_write_string(file,string(vsync));

//Close the file
file_text_close(file);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Load Fullscreen + Window size + VSync Settings

//If the 'settings.dat' file exist.
if (file_exists("Settings.dat")) {

    //Open the file
    var file = file_text_open_read("Settings.dat");

    //Set fullscreen mode based on the read value
    fullscreen = real(file_text_read_string(file));
    file_text_readln(file);

    //Set filtering mode based on the read value
    filter = real(file_text_read_string(file));
    file_text_readln(file);

    //Set vsync based on the read value
    vsync = real(file_text_read_string(file));

    //Close the file
    file_text_close(file);
}
else {

    //Fullscreen is off by default
    fullscreen = 0;

    //Set the window to double of it's original size
    filter = 2;

    //VSync is off by default
    vsync = 0;
}

//Apply loaded settings
alarm[1] = 1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Deals with the application surface, window size, and fading.

//Disable alpha blending
draw_enable_alphablend(false)

//No Filter
if (filter = 0)
    draw_surface(application_surface,0,0);

//2x Filtering 
else if (filter = 1)
    draw_surface_stretched(application_surface,0,0,global.gw*2,global.gh*2);

//3x Filtering
else if (filter = 2)
    draw_surface_stretched(application_surface,0,0,global.gw*3,global.gh*3);

//Enable alpha blending
draw_enable_alphablend(true)
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
